"use strict";(self["webpackChunkhex_vue_ec_website"]=self["webpackChunkhex_vue_ec_website"]||[]).push([[232],{5531:function(e,t,i){i.d(t,{Z:function(){return p}});var s=i(3396),r=i(7139);const a={class:"header text-white text-center d-flex justify-content-center align-items-center"},o={class:"h1 px-5 py-3 my-0 text-white border border-white border-3 bg-secondary bg-opacity-25"};function n(e,t,i,n,c,l){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("p",o,(0,r.zw)(i.title),1)])}var c={props:["title"]},l=i(89);const d=(0,l.Z)(c,[["render",n]]);var p=d},5517:function(e,t,i){i.d(t,{Z:function(){return g}});var s=i(3396),r=i(355);const a={key:0,class:"loader",id:"loader"},o=(0,s._)("img",{src:r,alt:"loading..."},null,-1),n=[o];function c(e,t,i,r,o,c){return e.isReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",a,n))}var l={props:["is-ready"]},d=i(89);const p=(0,d.Z)(l,[["render",c]]);var g=p},535:function(e,t,i){i.d(t,{Z:function(){return v}});var s=i(3396),r=i(7139),a=i(9242);const o={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},c=(0,s._)("span",{"aria-hidden":"true"},"«",-1),l=[c],d={key:0,class:"page-link"},p=["onClick"],g=(0,s._)("span",{"aria-hidden":"true"},"»",-1),u=[g];function h(e,t,i,c,g,h){return(0,s.wg)(),(0,s.iD)("nav",o,[(0,s._)("ul",n,[(0,s._)("li",{class:(0,r.C_)([{disabled:!i.pages.has_pre},"page-item"])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,a.iM)((e=>h.updatePage(i.pages.current_page-1)),["prevent"]))},l)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pages.total_pages,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,r.C_)(["page-item",{active:i.pages.current_page===e}]),key:e},[e===i.pages.current_page?((0,s.wg)(),(0,s.iD)("span",d,(0,r.zw)(e),1)):((0,s.wg)(),(0,s.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,a.iM)((t=>h.updatePage(e)),["prevent"])},(0,r.zw)(e),9,p))],2)))),128)),(0,s._)("li",{class:(0,r.C_)(["page-item",{disabled:!i.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,a.iM)((e=>h.updatePage(i.pages.current_page+1)),["prevent"]))},u)],2)])])}var m={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},b=i(89);const y=(0,b.Z)(m,[["render",h]]);var v=y},3232:function(e,t,i){i.r(t),i.d(t,{default:function(){return U}});var s=i(3396),r=i(9242),a=i(7139);const o={class:"container bg-secondary rounded-3 my-0 my-md-4"},n={class:"row justify-content-around py-4"},c=(0,s._)("strong",{class:"h5"},"全部商品",-1),l=[c],d=(0,s._)("strong",{class:"h5"},"小資家電",-1),p=[d],g=(0,s._)("strong",{class:"h5"},"質感居家",-1),u=[g],h=(0,s._)("strong",{class:"h5"},"精緻生活",-1),m=[h],b=(0,s._)("strong",{class:"h5"},"療癒小物",-1),y=[b],v={class:"row"},_=["onClick"],f={key:0,class:"text-white bg-success rounded-3 py-1 px-2"},w={class:"card-body"},k={class:"card-title text-primary"},C={class:"row justify-content-center align-items-center"},x={class:"col-12 text-primary h4 mb-3"},j={class:"price"},P={key:0,class:"col-6 mb-3"},M=["onClick"],D=(0,s._)("i",{class:"bi bi-heart-fill h6 me-1 me-md-2"},null,-1),z=(0,s._)("span",{class:"h6"},"加入收藏",-1),Z=[D,z],$={key:1,class:"col-6 mb-3"},F=["onClick"],R=(0,s._)("i",{class:"bi bi-heart-fill h6 me-1 me-md-2"},null,-1),H=(0,s._)("span",{class:"h6"},"移除收藏",-1),I=[R,H],L={class:"col-6 mb-3"},N=["onClick"],S=(0,s._)("i",{class:"bi bi-bag-fill h6 me-1 me-md-2"},null,-1),W=(0,s._)("span",{class:"h6"},"加入購物車",-1),q=[S,W];function O(e,t,i,c,d,g){const h=(0,s.up)("HeaderPic"),b=(0,s.up)("Loading"),D=(0,s.up)("Pagination"),z=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(h,{title:d.title},null,8,["title"]),(0,s.Wm)(b,{"is-ready":d.isReady},null,8,["is-ready"]),(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("button",{class:"btn btn-primary col-7 col-md-2 rounded-pill text-white border border-white border-2 mb-3 mb-md-0",onClick:t[0]||(t[0]=(0,r.iM)((e=>g.getCategory("")),["prevent"]))},l),(0,s._)("button",{class:"btn btn-primary col-5 col-md-2 rounded-pill text-white border border-white border-2 mb-3 mb-md-0",onClick:t[1]||(t[1]=(0,r.iM)((e=>g.getCategory("小資家電")),["prevent"]))},p),(0,s._)("button",{class:"btn btn-primary col-4 col-md-2 rounded-pill text-white border border-white border-2 mb-3 mb-md-0",onClick:t[2]||(t[2]=(0,r.iM)((e=>g.getCategory("質感居家")),["prevent"]))},u),(0,s._)("button",{class:"btn btn-primary col-4 col-md-2 rounded-pill text-white border border-white border-2 mb-3 mb-md-0",onClick:t[3]||(t[3]=(0,r.iM)((e=>g.getCategory("精緻生活")),["prevent"]))},m),(0,s._)("button",{class:"btn btn-primary col-4 col-md-2 rounded-pill text-white border border-white border-2 mb-3 mb-md-0",onClick:t[4]||(t[4]=(0,r.iM)((e=>g.getCategory("療癒小物")),["prevent"]))},y)]),(0,s._)("div",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.filterCategories,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"col-12 col-md-6 col-xl-4",key:e.id+t},[(0,s._)("div",{class:"card mb-4 rounded-3 border-primary border-1 shadow-info",style:{cursor:"pointer"},onClick:t=>this.$router.push(`/product/${e.id}`)},[(0,s._)("div",{style:(0,a.j5)([{backgroundImage:`url(${e.imageUrl})`},{height:"15rem","background-size":"cover","background-position":"center center"}]),class:"p-3"},[e.origin_price!==e.price?((0,s.wg)(),(0,s.iD)("span",f,"特價中")):(0,s.kq)("",!0)],4),(0,s._)("div",w,[(0,s._)("h5",k,(0,a.zw)(e.title),1),(0,s._)("div",C,[(0,s._)("div",x,[(0,s._)("div",j,"NT $"+(0,a.zw)(e.price),1)]),g.toggleFavorBtn(e.id)?((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("button",{class:"btn btn-success w-100 text-center text-white text-nowrap",onClick:(0,r.iM)((t=>g.toggleFavorites(e.id)),["stop"])},I,8,F)])):((0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("button",{class:"btn btn-primary w-100 text-center text-white text-nowrap",onClick:(0,r.iM)((t=>g.toggleFavorites(e.id)),["stop"])},Z,8,M)])),(0,s._)("div",L,[(0,s._)("button",{class:"btn btn-primary w-100 text-center text-white text-nowrap",onClick:(0,r.iM)((t=>g.addToCart(e.id)),["stop"])},q,8,N)])])])],8,_)])))),128))]),(0,s.Wm)(D,{pages:d.pagination,onEmitPages:g.getProducts},null,8,["pages","onEmitPages"])]),(0,s.Wm)(z)],64)}var T=i(5531),Y=i(535),B=i(5517),E={data(){return{title:"商品總覽",products:[],productId:"",categories:["小資家電","質感居家","精緻生活","療癒小物"],filterCategory:"",isLoading:"",isReady:"",pagination:{},favorites:[]}},components:{HeaderPic:T.Z,Pagination:Y.Z,Loading:B.Z},inject:["emitter"],methods:{getCategory(e){this.filterCategory=e,console.log(e)},getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favorites")),null==this.favorites&&(this.favorites=[])},toggleFavorites(e){this.getFavorites();const t=this.favorites.indexOf(e);-1===t?(this.favorites.push(e),this.emitter.emit("push-message",{style:"success",title:"收藏成功",emoji:"emoji-heart-eyes"})):(this.favorites.splice(t,1),this.emitter.emit("push-message",{style:"dark",title:"移除收藏",emoji:"emoji-dizzy"})),localStorage.setItem("favorites",JSON.stringify(this.favorites))},toggleFavorBtn(e){const t=this.favorites.includes(e);return t},getProducts(e=1){this.isReady=!1;const t=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/products?page=${e}`;this.$http.get(t).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination;const{categoryName:t}=this.$route.params;t&&(this.filterCategory=t),this.isReady=!0})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:e.response.data.message,emoji:"emoji-dizzy"})}))},addToCart(e,t=1){this.isReady=!1;const i="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart";this.isLoading=e;const s={product_id:e,qty:t};this.$http.post(i,{data:s}).then((e=>{this.emitter.emit("push-message",{style:"success",title:e.data.message,emoji:"emoji-heart-eyes"}),this.isLoading="",this.isReady=!0})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:e.response.data.message,emoji:"emoji-dizzy"}),this.isReady=!0}))},openProductModal(e){this.productId=e,this.$refs.productModal.openModal()}},computed:{filterCategories(){return this.filterCategory?this.products.filter((e=>{const t=e.category.includes(this.filterCategory);return t})):this.products}},mounted(){this.getProducts(),this.getFavorites()}},J=i(89);const K=(0,J.Z)(E,[["render",O]]);var U=K},355:function(e,t,i){e.exports=i.p+"img/loader.bf1579b8.svg"}}]);
//# sourceMappingURL=232.6f7d9588.js.map