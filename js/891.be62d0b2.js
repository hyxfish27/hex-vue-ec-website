"use strict";(self["webpackChunkhex_vue_ec_website"]=self["webpackChunkhex_vue_ec_website"]||[]).push([[891],{5531:function(t,e,s){s.d(e,{Z:function(){return h}});var a=s(3396),i=s(7139);const l={class:"header text-white text-center d-flex justify-content-center align-items-center"},r={class:"h1 px-5 py-3 my-0 text-white border border-white border-3 bg-secondary bg-opacity-25"};function o(t,e,s,o,n,c){return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("p",r,(0,i.zw)(s.title),1)])}var n={props:["title"]},c=s(89);const d=(0,c.Z)(n,[["render",o]]);var h=d},5517:function(t,e,s){s.d(e,{Z:function(){return u}});var a=s(3396),i=s(355);const l={key:0,class:"loader",id:"loader"},r=(0,a._)("img",{src:i,alt:"loading..."},null,-1),o=[r];function n(t,e,s,i,r,n){return t.isReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",l,o))}var c={props:["is-ready"]},d=s(89);const h=(0,d.Z)(c,[["render",n]]);var u=h},2891:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var a=s(3396),i=s(9242),l=s(7139);const r={class:"container"},o={key:0},n={class:"text-end my-3"},c=["disabled"],d={class:"table align-middle border-secondary"},h=(0,a._)("thead",{class:"bg-secondary text-dark border-bottom border-secondary"},[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"品名"),(0,a._)("th",{style:{width:"150px"}},"數量/單位"),(0,a._)("th",null,"單價")])],-1),u=["disabled","onClick"],p={class:"fas fa-spinner fa-pulse"},m=(0,a._)("i",{class:"bi bi-trash"},null,-1),y={key:0,class:"text-success"},g={class:"input-group input-group-sm"},b={class:"input-group mb-3"},_=["onUpdate:modelValue","disabled","onChange"],v=["value"],w={class:"input-group-text bg-secondary border border-primary text-dark",id:"basic-addon2"},x={class:"text-end"},f={class:"row justify-content-center"},k={key:0,class:"col-md-6"},C={class:"col-md-6 text-center"},j={key:0,class:"text-success"},z=(0,a._)("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"},L={key:0},R=(0,a._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),$={class:"text-end text-success"},q=(0,a.uE)('<div class="container bg-secondary mb-4"><div class="row justify-content-center align-items-center"><p class="h4 col-12 text-white bg-primary py-3">大大大優惠!!</p><p class="h5 col-12 py-3 text-dark"> 輸入折扣碼 <strong class="text-white bg-success p-1 rounded-2">big777</strong> 即可享有77折優惠 </p></div></div>',1),H={class:"row justify-content-end input-group mx-0"},Z={class:"text-end my-4"},A=(0,a._)("span",{class:"h5"},"前往填寫訂購資料",-1),U=(0,a._)("i",{class:"bi bi-arrow-right-circle-fill ms-1 h4"},null,-1),I={key:1,class:"row justify-content-center py-5 text-center"},M=(0,a._)("div",{class:"col-12"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"150",height:"150",fill:"currentColor",class:"bi bi-cart-x text-secondary",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M7.354 5.646a.5.5 0 1 0-.708.708L7.793 7.5 6.646 8.646a.5.5 0 1 0 .708.708L8.5 8.207l1.146 1.147a.5.5 0 0 0 .708-.708L9.207 7.5l1.147-1.146a.5.5 0 0 0-.708-.708L8.5 6.793 7.354 5.646z"}),(0,a._)("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})])],-1),W={class:"col-12"},V=(0,a._)("h4",{class:"my-3 h4 text-dark"},"購物車內空空如也，去買點喜歡的東西吧",-1),Y=(0,a._)("button",{type:"button",class:"btn btn-primary h4",style:{width:"9rem"}},[(0,a.Uk)(" 前往選購"),(0,a._)("i",{class:"bi bi-arrow-right-circle-fill ms-2 h4"})],-1);function K(t,e,s,K,P,B){const E=(0,a.up)("Loading"),F=(0,a.up)("HeaderPic"),N=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(E,{"is-ready":P.isReady},null,8,["is-ready"]),(0,a.Wm)(F,{title:P.title},null,8,["title"]),(0,a._)("div",r,[P.cartLength>0?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[(0,a._)("button",{class:"btn btn-outline-primary",disabled:""!==P.isLoading,type:"button",onClick:e[0]||(e[0]=(...t)=>B.clearAllCart&&B.clearAllCart(...t))}," 清空購物車 ",8,c)]),(0,a._)("table",d,[h,(0,a._)("tbody",null,[P.cartData.carts?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(P.cartData.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",disabled:P.isLoading===e.id,onClick:t=>B.removeCartItem(e.id)},[(0,a.wy)((0,a._)("i",p,null,512),[[i.F8,P.isLoading===e.id]]),m],8,u)]),(0,a._)("td",null,[(0,a.Uk)((0,l.zw)(e.product.title)+" ",1),e.final_total!==e.total?((0,a.wg)(),(0,a.iD)("div",y," 已套用優惠券 ")):(0,a.kq)("",!0)]),(0,a._)("td",null,[(0,a._)("div",g,[(0,a._)("div",b,[(0,a.wy)((0,a._)("select",{id:"cartNum",class:"form-select border border-primary","onUpdate:modelValue":t=>e.qty=t,disabled:P.isLoading===e.id,onChange:t=>B.updateCartItem(e)},[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(20,(t=>(0,a._)("option",{value:t,key:`${t}${e.id}`},(0,l.zw)(t),9,v))),64))],40,_),[[i.bM,e.qty]]),(0,a._)("span",w,(0,l.zw)(e.product.unit),1)])])]),(0,a._)("td",x,[(0,a._)("div",f,[e.final_total!==e.total?((0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("del",null,"原價 : "+(0,l.zw)(e.total),1)])):(0,a.kq)("",!0),(0,a._)("div",C,[e.final_total!==e.total?((0,a.wg)(),(0,a.iD)("small",j,"折扣價：")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,l.zw)(t.$filters.currency(e.final_total)),1)])])])])))),128)):(0,a.kq)("",!0)]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[z,(0,a._)("td",D,(0,l.zw)(t.$filters.currency(P.cartData.total)),1)]),P.cartData.final_total!==P.cartData.total?((0,a.wg)(),(0,a.iD)("tr",L,[R,(0,a._)("td",$,(0,l.zw)(t.$filters.currency(P.cartData.final_total)),1)])):(0,a.kq)("",!0)])]),q,(0,a._)("div",H,[(0,a.wy)((0,a._)("input",{type:"text",class:"col-12 col-md-6 border border-primary",placeholder:"請輸入優惠碼",id:"codeInput","onUpdate:modelValue":e[1]||(e[1]=t=>P.code=t)},null,512),[[i.nr,P.code]]),(0,a._)("button",{type:"button",class:"col-12 col-md-3 btn btn-primary mx-0",onClick:e[2]||(e[2]=(...t)=>B.useCoupon&&B.useCoupon(...t))}," 使用折扣碼 ")]),(0,a._)("div",Z,[(0,a.Wm)(N,{class:"btn btn-success h4",to:"/order"},{default:(0,a.w5)((()=>[A,U])),_:1})])])):((0,a.wg)(),(0,a.iD)("div",I,[M,(0,a._)("div",W,[V,(0,a.Wm)(N,{to:"/products"},{default:(0,a.w5)((()=>[Y])),_:1})])]))])],64)}var P=s(5531),B=s(5517),E={data(){return{title:"購買清單",code:"",isLoading:"",isReady:!1,qty:1,cartData:{},cartLength:0}},components:{HeaderPic:P.Z,Loading:B.Z},inject:["emitter"],methods:{getCart(){this.isReady=!1;const t="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart";this.$http.get(t).then((t=>{this.cartData=t.data.data,this.cartLength=this.cartData.carts.length,this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"})}))},updateCartItem(t){this.isReady=!1;const e=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart/${t.id}`,s={product_id:t.id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"emoji-laughing"}),this.getCart(),this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"})}))},removeCartItem(t){this.isReady=!1;const e=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart/${t}`;this.isLoading=t,this.$http.delete(e).then((t=>{this.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"emoji-laughing"}),this.getCart(),this.isLoading="",this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"}),this.isReady=!0}))},clearAllCart(){this.isReady=!1;const t="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/carts";this.isLoading="clear",this.$http.delete(t).then((t=>{this.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"emoji-laughing"}),this.getCart(),this.isLoading="",this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"}),this.isReady=!0}))},useCoupon(){this.isReady=!1;const t=this.code,e="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/coupon";this.$http.post(e,{data:{code:t}}).then((t=>{this.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"emoji-laughing"}),this.getCart(),this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"}),this.isReady=!0}))}},mounted(){this.getCart()}},F=s(89);const N=(0,F.Z)(E,[["render",K]]);var G=N},355:function(t,e,s){t.exports=s.p+"img/loader.bf1579b8.svg"}}]);
//# sourceMappingURL=891.be62d0b2.js.map