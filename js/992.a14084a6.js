"use strict";(self["webpackChunkhex_vue_ec_website"]=self["webpackChunkhex_vue_ec_website"]||[]).push([[992],{5531:function(t,e,i){i.d(e,{Z:function(){return h}});var s=i(3396),r=i(7139);const a={class:"header text-white text-center d-flex justify-content-center align-items-center"},o={class:"h1 px-5 py-3 my-0 text-white border border-white border-3 bg-secondary bg-opacity-25"};function n(t,e,i,n,l,d){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("p",o,(0,r.zw)(i.title),1)])}var l={props:["title"]},d=i(89);const c=(0,d.Z)(l,[["render",n]]);var h=c},5517:function(t,e,i){i.d(e,{Z:function(){return u}});var s=i(3396),r=i(355);const a={key:0,class:"loader",id:"loader"},o=(0,s._)("img",{src:r,alt:"loading..."},null,-1),n=[o];function l(t,e,i,r,o,l){return t.isReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",a,n))}var d={props:["is-ready"]},c=i(89);const h=(0,c.Z)(d,[["render",l]]);var u=h},9992:function(t,e,i){i.r(e),i.d(e,{default:function(){return S}});var s=i(3396),r=i(9242),a=i(7139);const o={class:"container"},n={key:0,class:"table align-middle text-center border border-secondary border-5 mt-4"},l=(0,s._)("thead",{class:"bg-secondary text-dark"},[(0,s._)("tr",null,[(0,s._)("th"),(0,s._)("th",null,"圖片"),(0,s._)("th",null,"商品"),(0,s._)("th",null,"價格"),(0,s._)("th")])],-1),d=["onClick"],c=(0,s._)("i",{class:"bi bi-heart-fill h6 me-2"},null,-1),h=(0,s._)("span",{class:"h6"},"移除",-1),u=[c,h],p={style:{width:"120px"}},g={key:0,class:"h5"},m={key:1},y={class:"h6"},b={class:"h5"},v={class:"btn-group btn-group-sm"},_=["onClick","disabled"],w=(0,s._)("i",{class:"bi bi-bag-fill h6 me-1 me-md-2"},null,-1),f=(0,s._)("span",{class:"h6"},"加入購物車",-1),k=[w,f],x={key:1,class:"row justify-content-center py-5 text-center"},j=(0,s._)("div",{class:"col-12"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"150",height:"150",fill:"currentColor",class:"bi bi-search-heart text-secondary",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M6.5 4.482c1.664-1.673 5.825 1.254 0 5.018-5.825-3.764-1.664-6.69 0-5.018Z"}),(0,s._)("path",{d:"M13 6.5a6.471 6.471 0 0 1-1.258 3.844c.04.03.078.062.115.098l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1.007 1.007 0 0 1-.1-.115h.002A6.5 6.5 0 1 1 13 6.5ZM6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z"})])],-1),z={class:"col-12"},L=(0,s._)("h4",{class:"my-3 h4 text-dark"},"還沒有喜歡的商品嗎? 快來逛逛收藏",-1),R=(0,s._)("button",{type:"button",class:"btn btn-primary h4",style:{width:"9rem"}},[(0,s.Uk)(" 前往選購"),(0,s._)("i",{class:"bi bi-arrow-right-circle-fill ms-2 h4"})],-1);function Z(t,e,i,c,h,w){const f=(0,s.up)("Loading"),Z=(0,s.up)("HeaderPic"),C=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(f,{"is-ready":h.isReady},null,8,["is-ready"]),(0,s.Wm)(Z,{title:h.title},null,8,["title"]),(0,s._)("div",o,[h.favorites.length>0?((0,s.wg)(),(0,s.iD)("table",n,[l,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(h.likedProducts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,[(0,s._)("button",{class:"btn btn-success text-center text-white text-nowrap",onClick:(0,r.iM)((e=>w.removeLiked(t.id)),["stop"])},u,8,d)]),(0,s._)("td",p,[(0,s._)("div",{style:(0,a.j5)([{backgroundImage:`url(${t.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,s._)("td",null,(0,a.zw)(t.title),1),(0,s._)("td",null,[t.price===t.origin_price?((0,s.wg)(),(0,s.iD)("div",g,(0,a.zw)(t.price)+" 元 ",1)):((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("del",y,"原價 "+(0,a.zw)(t.origin_price)+" 元",1),(0,s._)("div",b,"特價 "+(0,a.zw)(t.price)+" 元",1)]))]),(0,s._)("td",null,[(0,s._)("div",v,[(0,s._)("button",{class:"btn btn-primary w-100 text-center text-white text-nowrap",onClick:(0,r.iM)((e=>w.addToCart(t.id)),["stop"]),disabled:h.isLoading===t.id},k,8,_)])])])))),128))])])):((0,s.wg)(),(0,s.iD)("div",x,[j,(0,s._)("div",z,[L,(0,s.Wm)(C,{to:"/products"},{default:(0,s.w5)((()=>[R])),_:1})])]))])],64)}var C=i(5531),D=i(5517),P={data(){return{title:"收藏清單",favorites:[],products:[],likedProducts:[],isReady:!0,isLoading:""}},components:{HeaderPic:C.Z,Loading:D.Z},inject:["emitter"],methods:{getProducts(){this.isReady=!1;const t="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/products/all";this.$http.get(t).then((t=>{this.products=t.data.products,this.getLiked(),this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"})}))},getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favorites"))},getLiked(){this.likedProducts=this.products.filter((t=>this.favorites.includes(t.id)))},removeLiked(t){this.isReady=!1;const e=this.favorites.indexOf(t);-1!==e&&this.favorites.splice(e,1),this.emitter.emit("push-message",{style:"dark",title:"移除收藏",emoji:"emoji-dizzy"}),this.isReady=!0,this.getLiked(),localStorage.setItem("favorites",JSON.stringify(this.favorites))},addToCart(t,e=1){this.isReady=!1;const i="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart";this.isLoading=t;const s={product_id:t,qty:e};this.$http.post(i,{data:s}).then((t=>{this.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"emoji-heart-eyes"}),this.isLoading="",this.isReady=!0})).catch((t=>{this.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"emoji-dizzy"}),this.isReady=!0}))}},mounted(){this.getProducts(),this.getFavorites()}},M=i(89);const H=(0,M.Z)(P,[["render",Z]]);var S=H},355:function(t,e,i){t.exports=i.p+"img/loader.bf1579b8.svg"}}]);
//# sourceMappingURL=992.a14084a6.js.map